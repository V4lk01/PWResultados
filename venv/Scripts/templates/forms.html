{% extends 'master.html' %}

{% block access_control %}
    <li class="sidebar-item">
        <a class="sidebar-link" href="{{ url_for('users') }}">
          <i class="align-middle" data-feather="sliders"></i> <span class="align-middle">Utilizadores</span>
        </a>
    </li>
    <li class="sidebar-item">
        <a class="sidebar-link" href="{{ url_for('contests') }}">
          <i class="align-middle" data-feather="calendar"></i> <span class="align-middle">Concursos</span>
        </a>
    </li>
    <li class="sidebar-item">
        <a class="sidebar-link" href="{{ url_for('candidatures') }}">
          <i class="align-middle" data-feather="edit"></i> <span class="align-middle">Candidaturas</span>
        </a>
    </li>
    <li class="sidebar-item active">
        <a class="sidebar-link" href="{{ url_for('results') }}">
          <i class="align-middle" data-feather="award"></i> <span class="align-middle">Resultados</span>
        </a>
    </li>
    <li class="sidebar-item">
        <a class="sidebar-link" href="{{ url_for('forms') }}">
          <i class="align-middle" data-feather="send"></i> <span class="align-middle">Formulários</span>
        </a>
    </li>
{% endblock %}

{% block body %}

    <div class="row mb-2 mb-xl-3">
      <div class="col-auto d-none d-sm-block">
        <h3>{{questions|count}} Perguntas</h3>
      </div>
    
    <div class="row">
      <div class="col-12">
        <div class="card">
          <div class="card-header">
            <label>Filtrar &nbsp </label>
              <select id="button2" onchange="sortTable('tabela1',this)">
                <option value="Filtrar" >Filtrar por...</option>
                <option value="1">Concurso</option>
                <option value="4">Ordem</option>
                <option value="2">Tipo</option>
              </select>
            <table class="table table-hover" id="tabela1"> 
              <thead>
                <tr>
                  <th scope="col"><input type="checkbox" id=-1 name="Checkbox"></th>
                  <th scope="col">Concurso</th>
                  <th scope="col">Tipo</th>
                  <th scope="col">Descrição</th>
                  <th scope="col">Ordem</th>
                  <th scope="col">Ações</th>
                </tr>
              </thead>
              <tbody>
                {% for question in questions %}
                  <tr>
                    <td>
                      <input type="checkbox" id={{question.id}} name="Checkbox">
                    </td>
                    <td>
                      {{question.contest}}
                    </td>
                    <td>
                      {{question.type}}
                    </td>
                    <td>
                      {{question.description}}
                    </td>
                    <td>
                      {{question.order}}
                    </td>
                    <td>
                      <a href="https://google.com/"><input name="viewButton" id="view{{question.id}}" type="image" src="static/img/view.png"></input></a>
                      <a href="https://google.com/"><input name="editButton" id="edit{{question.id}}" type="image" src="static/img/edit.png"></input></a>
                      <a href="https://google.com/"><input name="deleteButton" id="delete{{question.id}}" type="image" src="static/img/delete.png"></input></a>
                    </td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
           <div class="card-body">
          </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      function sortTable(id,type) {
        var tables, sort, i, x, y, tableSort, value;
        value = type.value;
        tables = document.getElementById(id);
        sort= true;
        while (sort) {
          
          sort = false;
          tblrow = tables.rows;

          for (i = 1; i < (tblrow.length - 1); i++) {
            tableSort = false;
            
            x = tblrow[i].getElementsByTagName("td")[value];
            y = tblrow[i + 1].getElementsByTagName("td")[value];
            

            if (x.innerHTML.toUpperCase() < y.innerHTML.toUpperCase()) {
              tableSort = true;
              break;
            }
          
          }
          if (tableSort) {
            tblrow[i].parentNode.insertBefore(tblrow[i + 1], tblrow[i]);
            sort = true;
          }
        }
      }
  </script>
{% endblock body %}

